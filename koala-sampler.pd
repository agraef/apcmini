#N canvas 676 353 433 353 12;
#X declare -path lib;
#X obj 150 120 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X obj 217 120 hradio 15 0 0 3 empty empty empty 0 -8 0 10 #fcfcfc
#000000 #000000 0;
#N canvas 562 315 836 530 banks 0;
#X msg 20 100 64;
#X obj 20 130 until;
#X obj 20 161 f;
#X obj 50 161 + 1;
#X obj 20 74 t b b;
#X msg 70 100 0;
#X obj 20 219 div 8;
#X obj 80 219 mod 8;
#X obj 20 310 pack f f;
#X obj 20 190 t f f f;
#X msg 20 339 pad \$2 \$1 7;
#X obj 140 181 t b a;
#X obj 380 51 loadbang;
#X obj 380 80 t b b;
#X msg 412 111 0;
#X obj 412 141 value bank;
#X obj 320 141 value bank;
#X obj 440 74 t b f;
#X obj 320 170 t f f;
#X obj 352 260 sel 0 1 2;
#X msg 352 289 0 1;
#X msg 392 289 1 1;
#X msg 432 289 1 0;
#X msg 352 318 banks 0 0 \$1 \$2;
#X obj 200 10 inlet;
#X obj 440 10 inlet;
#X obj 20 370 s apc-in;
#X obj 140 10 r init;
#X obj 510 50 closebang;
#X msg 510 146 64;
#X obj 510 176 until;
#X obj 510 207 f;
#X obj 540 207 + 1;
#X obj 510 120 t b b;
#X msg 560 146 0;
#X msg 510 236 pad \$1 0 0;
#X obj 510 265 s apc-in;
#X msg 600 236 key 0 \, assign 0 \, banks 0 0 0 0;
#X obj 510 79 t b b;
#X obj 600 50 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X obj 140 40 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X text 510 10 closebang takes down the entire display when exiting.
, f 38;
#X obj 172 220 unpack f f f f f f;
#N canvas 2265 489 542 300 colors 0;
#X obj 13 26 inlet;
#X obj 63 26 inlet;
#X obj 113 26 inlet;
#X obj 163 26 inlet;
#X obj 213 26 inlet;
#X obj 263 26 inlet;
#X obj 313 26 inlet;
#X obj 363 26 inlet;
#X obj 13 169 outlet;
#X obj 40 80 expr if($f1<4 \, if($f2<4 \, $f3 \, $f4) \, if($f1>=6
\, if($f2<4 \, $f5 \, $f6) \, if($f2<4 \, $f7 \, $f8))), f 65;
#X connect 0 0 9 0;
#X connect 1 0 9 1;
#X connect 2 0 9 2;
#X connect 3 0 9 3;
#X connect 4 0 9 4;
#X connect 5 0 9 5;
#X connect 6 0 9 6;
#X connect 7 0 9 7;
#X connect 9 0 8 0;
#X restore 140 280 pd colors;
#X msg 320 200 get \$1 2;
#X obj 140 119 list store 33 41 4 12;
#X obj 140 148 list append 34 42 2 8;
#X msg 470 420 33 41 4 12 34 42 2 8;
#X obj 470 449 list split 4;
#X obj 200 356 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X obj 150 356 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X obj 150 380 t b b;
#X obj 230 60 r pad-cols;
#X obj 230 90 r seq-cols;
#X obj 470 478 s pad-cols;
#X obj 550 478 s seq-cols;
#N canvas 0 0 450 300 random-colors 0;
#X msg 40 116 8;
#X obj 40 145 until;
#X obj 40 174 random 128;
#X msg 40 203 append \$1;
#X obj 40 232 list store;
#X obj 40 80 t b b b;
#X obj 13 26 inlet;
#X obj 13 305 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 7 0;
#X connect 5 0 4 0;
#X connect 5 1 0 0;
#X connect 5 2 4 1;
#X connect 6 0 5 0;
#X restore 200 380 pd random-colors;
#X obj 320 10 r show;
#X obj 150 450 s show;
#X obj 200 410 t b a a;
#X obj 246 440 list prepend set;
#X obj 246 460 list trim;
#X text 470 340 Edit the default colors here - 4 banks of pads and
launchers \, in that order. You can also reset to default colors or
generate random colors using the controls on the left., f 45;
#X obj 650 420 loadbang;
#X obj 350 110 s show;
#X obj 140 64 s show;
#X obj 320 39 value mode;
#X obj 320 68 sel 0 2;
#N canvas 1037 340 578 491 drum-colors 0;
#X msg 40 106 64;
#X obj 40 136 until;
#X obj 40 167 f;
#X obj 70 167 + 1;
#X obj 40 80 t b b;
#X msg 90 106 0;
#X obj 40 230 expr ($f1%8>=4)*12 + int($f1/8)*4 + ($f1%8) + ($f1>=32)*16
;
#X obj 40 259 div 16;
#X msg 40 288 get \$1 1;
#X obj 40 317 list store 33 41 4 12;
#X obj 40 200 t f f;
#X obj 40 346 pack f f;
#X msg 40 375 pad \$2 \$1 10;
#X obj 220 320 + 64;
#X obj 184 288 r pad-cols;
#X obj 13 26 inlet;
#X obj 13 448 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 0 10 0;
#X connect 3 0 2 1;
#X connect 4 0 0 0;
#X connect 4 1 5 0;
#X connect 5 0 2 1;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 11 0;
#X connect 10 0 6 0;
#X connect 10 1 13 0;
#X connect 11 0 12 0;
#X connect 12 0 16 0;
#X connect 13 0 11 1;
#X connect 14 0 9 1;
#X connect 15 0 4 0;
#X restore 140 310 pd drum-colors;
#X msg 246 490;
#X obj 380 170 t b b;
#X obj 412 200 value bank;
#X obj 430 170 t b;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 0 9 0;
#X connect 3 0 2 1;
#X connect 4 0 0 0;
#X connect 4 1 5 0;
#X connect 5 0 2 1;
#X connect 6 0 43 0;
#X connect 7 0 43 1;
#X connect 8 0 10 0;
#X connect 9 0 6 0;
#X connect 9 1 7 0;
#X connect 9 2 8 1;
#X connect 10 0 26 0;
#X connect 11 0 4 0;
#X connect 11 1 42 0;
#X connect 12 0 13 0;
#X connect 13 0 64 0;
#X connect 13 1 14 0;
#X connect 14 0 15 0;
#X connect 16 0 18 0;
#X connect 17 0 64 0;
#X connect 17 1 15 0;
#X connect 18 0 44 0;
#X connect 18 1 19 0;
#X connect 19 0 20 0;
#X connect 19 1 21 0;
#X connect 19 2 22 0;
#X connect 20 0 23 0;
#X connect 21 0 23 0;
#X connect 22 0 23 0;
#X connect 23 0 26 0;
#X connect 24 0 65 0;
#X connect 25 0 17 0;
#X connect 27 0 40 0;
#X connect 28 0 38 0;
#X connect 29 0 30 0;
#X connect 30 0 31 0;
#X connect 31 0 32 0;
#X connect 31 0 35 0;
#X connect 32 0 31 1;
#X connect 33 0 29 0;
#X connect 33 1 34 0;
#X connect 34 0 31 1;
#X connect 35 0 36 0;
#X connect 37 0 36 0;
#X connect 38 0 33 0;
#X connect 38 1 37 0;
#X connect 39 0 38 0;
#X connect 40 0 65 0;
#X connect 42 0 43 2;
#X connect 42 1 43 3;
#X connect 42 2 43 4;
#X connect 42 3 43 5;
#X connect 42 4 43 6;
#X connect 42 5 43 7;
#X connect 43 0 8 0;
#X connect 44 0 45 0;
#X connect 45 0 46 0;
#X connect 46 0 11 0;
#X connect 47 0 48 0;
#X connect 48 0 54 0;
#X connect 48 1 55 0;
#X connect 49 0 56 0;
#X connect 50 0 51 0;
#X connect 51 0 58 0;
#X connect 51 1 47 0;
#X connect 52 0 45 1;
#X connect 53 0 46 1;
#X connect 56 0 59 0;
#X connect 57 0 66 0;
#X connect 59 0 58 0;
#X connect 59 1 48 0;
#X connect 59 2 60 0;
#X connect 60 0 61 0;
#X connect 61 0 69 0;
#X connect 63 0 47 0;
#X connect 66 0 67 0;
#X connect 67 0 16 0;
#X connect 67 1 70 0;
#X connect 67 2 72 0;
#X connect 68 0 26 0;
#X connect 70 0 68 0;
#X connect 70 1 71 0;
#X connect 71 0 19 0;
#X connect 72 0 71 0;
#X restore 150 150 pd banks;
#X obj 40 21 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X obj 310 310 pd-remote;
#X msg 310 280 pdluax reload;
#X obj 40 50 midi-input;
#X obj 40 311 midi-output;
#X obj 40 150 apcmini;
#X obj 150 310 declare -path lib;
#N canvas 671 422 582 287 control 0;
#X msg 93 110 1;
#X msg 130 110 -1;
#N canvas 842 518 237 259 change-bank 0;
#X obj 20 73 t b f;
#X obj 20 102 value bank;
#X obj 20 131 +;
#X obj 20 30 inlet;
#X obj 20 210 outlet;
#X obj 20 160 mod 3;
#X connect 0 0 1 0;
#X connect 0 1 2 1;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 3 0 0 0;
#X connect 5 0 4 0;
#X restore 93 140 pd change-bank;
#N canvas 786 470 928 389 pad 0;
#X floatatom 10 209 5 0 0 0 - - -, f 5;
#X obj 10 40 unpack f f;
#X floatatom 77 209 5 0 0 0 - - -, f 5;
#X obj 10 237 pack f f;
#X msg 10 266 note \$1 \$2 26;
#X obj 10 10 inlet;
#X obj 10 340 outlet;
#X obj 10 109 moses 32;
#X floatatom 170 209 5 0 0 0 - - -, f 5;
#X floatatom 237 209 5 0 0 0 - - -, f 5;
#X obj 170 237 pack f f;
#X obj 170 110 - 32;
#X obj 10 150 expr ($f1%8>=4)*12+int($f1/8)*4+($f1%8)+bank*16;
#X obj 170 180 expr ($f1%8>=4)*12+int($f1/8)*4+($f1%8);
#X msg 170 266 note \$1 \$2 26;
#X obj 10 70 moses 64;
#X floatatom 240 30 5 0 0 0 - - -, f 5;
#X obj 240 58 - 64;
#X obj 240 87 expr ($f1%8>=4)*12 + int($f1/8)*4 + ($f1%8) + ($f1>=32)*16
;
#X obj 10 180 + 36;
#X text 300 40 drum mode (mk2 only);
#X connect 0 0 3 0;
#X connect 1 0 15 0;
#X connect 1 1 2 0;
#X connect 1 1 9 0;
#X connect 2 0 3 1;
#X connect 3 0 4 0;
#X connect 4 0 6 0;
#X connect 5 0 1 0;
#X connect 7 0 12 0;
#X connect 7 1 11 0;
#X connect 8 0 10 0;
#X connect 9 0 10 1;
#X connect 10 0 14 0;
#X connect 11 0 13 0;
#X connect 12 0 19 0;
#X connect 13 0 8 0;
#X connect 14 0 6 0;
#X connect 15 0 7 0;
#X connect 15 1 16 0;
#X connect 16 0 17 0;
#X connect 17 0 18 0;
#X connect 18 0 19 0;
#X connect 19 0 0 0;
#X restore 210 140 pd pad;
#N canvas 846 359 450 415 fader 0;
#X msg 40 111 0;
#X msg 80 111 1;
#X msg 120 111 2;
#X msg 160 111 3;
#X obj 156 191 unpack f f;
#X obj 40 220 expr $f1*9+21+$f2;
#X floatatom 40 249 5 0 0 0 - - -, f 5;
#X obj 40 277 pack f f;
#X msg 40 306 ctl \$2 \$1 17;
#X obj 40 80 t b a;
#X obj 90 80 t b a;
#X obj 140 80 t b a;
#X obj 190 80 t b a;
#X obj 13 26 inlet;
#X obj 63 26 inlet;
#X obj 113 26 inlet;
#X obj 163 26 inlet;
#X obj 13 379 outlet;
#X connect 0 0 5 0;
#X connect 1 0 5 0;
#X connect 2 0 5 0;
#X connect 3 0 5 0;
#X connect 4 0 5 1;
#X connect 4 1 7 1;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 17 0;
#X connect 9 0 0 0;
#X connect 9 1 4 0;
#X connect 10 0 1 0;
#X connect 10 1 4 0;
#X connect 11 0 2 0;
#X connect 11 1 4 0;
#X connect 12 0 3 0;
#X connect 12 1 4 0;
#X connect 13 0 9 0;
#X connect 14 0 10 0;
#X connect 15 0 11 0;
#X connect 16 0 12 0;
#X restore 270 140 pd fader;
#X obj 20 23 inlet;
#X obj 20 210 outlet;
#X obj 93 210 outlet;
#N canvas 366 221 450 300 solo 0;
#X obj 20 70 sel 0 1 2 3 4 5 6 7;
#X obj 20 100 solo 0;
#X obj 20 30 inlet;
#X obj 20 180 outlet;
#X obj 76 180 outlet;
#X obj 69 100 solo 1;
#X obj 118 100 solo 2;
#X obj 167 100 solo 3;
#X obj 216 100 solo 4;
#X obj 265 100 solo 5;
#X obj 314 100 solo 6;
#X obj 363 100 solo 7;
#X connect 0 0 1 0;
#X connect 0 1 5 0;
#X connect 0 2 6 0;
#X connect 0 3 7 0;
#X connect 0 4 8 0;
#X connect 0 5 9 0;
#X connect 0 6 10 0;
#X connect 0 7 11 0;
#X connect 1 0 3 0;
#X connect 1 1 4 0;
#X connect 2 0 0 0;
#X connect 5 0 3 0;
#X connect 5 1 4 0;
#X connect 6 0 3 0;
#X connect 6 1 4 0;
#X connect 7 0 3 0;
#X connect 7 1 4 0;
#X connect 8 0 3 0;
#X connect 8 1 4 0;
#X connect 9 0 3 0;
#X connect 9 1 4 0;
#X connect 10 0 3 0;
#X connect 10 1 4 0;
#X connect 11 0 3 0;
#X connect 11 1 4 0;
#X restore 344 140 pd solo;
#N canvas 366 221 450 300 mute 0;
#X obj 20 70 sel 0 1 2 3 4 5 6 7;
#X obj 20 30 inlet;
#X obj 20 180 outlet;
#X obj 76 180 outlet;
#X obj 20 100 mute 0;
#X obj 69 100 mute 1;
#X obj 118 100 mute 2;
#X obj 167 100 mute 3;
#X obj 216 100 mute 4;
#X obj 265 100 mute 5;
#X obj 314 100 mute 6;
#X obj 363 100 mute 7;
#X connect 0 0 4 0;
#X connect 0 1 5 0;
#X connect 0 2 6 0;
#X connect 0 3 7 0;
#X connect 0 4 8 0;
#X connect 0 5 9 0;
#X connect 0 6 10 0;
#X connect 0 7 11 0;
#X connect 1 0 0 0;
#X connect 4 0 2 0;
#X connect 4 1 3 0;
#X connect 5 0 2 0;
#X connect 5 1 3 0;
#X connect 6 0 2 0;
#X connect 6 1 3 0;
#X connect 7 0 2 0;
#X connect 7 1 3 0;
#X connect 8 0 2 0;
#X connect 8 1 3 0;
#X connect 9 0 2 0;
#X connect 9 1 3 0;
#X connect 10 0 2 0;
#X connect 10 1 3 0;
#X connect 11 0 2 0;
#X connect 11 1 3 0;
#X restore 417 140 pd mute;
#X obj 20 80 route mode bank-right bank-left pad vol pan send dev solo
mute scene, f 68;
#N canvas 0 0 450 300 scene 0;
#X obj 40 80 unpack f f;
#X obj 40 110 + 72;
#X obj 40 145 pack f f;
#X msg 40 174 note \$1 \$2 32;
#X obj 13 26 inlet;
#X obj 13 247 outlet;
#X connect 0 0 1 0;
#X connect 0 1 2 1;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 4 0 0 0;
#X restore 490 140 pd scene;
#X obj 229 210 s apc-in;
#X obj 149 210 s midi-out;
#X obj 20 109 t f f, f 6;
#X obj 20 138 sel 0 2;
#X obj 60 170 value mode;
#X connect 0 0 2 0;
#X connect 1 0 2 0;
#X connect 2 0 7 0;
#X connect 3 0 13 0;
#X connect 4 0 13 0;
#X connect 5 0 10 0;
#X connect 8 0 12 0;
#X connect 8 1 13 0;
#X connect 9 0 12 0;
#X connect 9 1 13 0;
#X connect 10 0 14 0;
#X connect 10 1 0 0;
#X connect 10 2 1 0;
#X connect 10 3 3 0;
#X connect 10 4 4 0;
#X connect 10 5 4 1;
#X connect 10 6 4 2;
#X connect 10 7 4 3;
#X connect 10 8 8 0;
#X connect 10 9 9 0;
#X connect 10 10 11 0;
#X connect 11 0 13 0;
#X connect 14 0 15 0;
#X connect 14 1 16 0;
#X connect 15 0 6 0;
#X connect 15 1 6 0;
#X restore 150 80 pd control;
#X obj 310 220 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#N canvas 1060 484 425 379 init 0;
#X msg 52 130 model;
#X obj 100 30 loadbang;
#X obj 100 59 del 500;
#X obj 20 30 inlet;
#X obj 52 157 s apc-in;
#X obj 20 100 t b b;
#X obj 20 219 t b b;
#X obj 52 278 s apc-in;
#X msg 52 250 mode 0;
#X obj 20 320 del 100;
#X obj 20 349 s init;
#X obj 20 190 del 500;
#X text 180 30 Wait until MIDI connections are established \, try to
figure out the model (mk1 or mk2) \, wait some more for the reply \,
then force the device to standard cliplaunch mode (mk2 only) \, wait
some more \, then initialize the pad display (this is done in the banks
subpatch). This whole rigmarole is needed to have the mk2 properly
initialized in case it's in drum or note mode at startup., f 31;
#X connect 0 0 4 0;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 3 0 5 0;
#X connect 5 0 11 0;
#X connect 5 1 0 0;
#X connect 6 0 9 0;
#X connect 6 1 8 0;
#X connect 8 0 7 0;
#X connect 9 0 10 0;
#X connect 11 0 6 0;
#X restore 310 240 pd init;
#X obj 310 110 spigot;
#X obj 349 80 tgl 15 1 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 40 110 r apc-in;
#X obj 40 280 r midi-out;
#X obj 72 250 s apc-out;
#X obj 150 50 r apc-out;
#X obj 40 224 t a a;
#N canvas 997 540 450 300 log 0;
#X obj 119 110 print;
#X obj 10 30 inlet;
#X obj 40 240 route stop solo mute rec sel note sysex;
#X obj 10 80 route note sysex;
#X text 10 160 the messages that may be output by the external: stop
to stop clips in a track \, track controls (solo \, mute \, rec arm
\, and select) \, and note and sysex which should be passed on to midi-output
;
#X text 140 80 print everything but note and sysex;
#X connect 1 0 3 0;
#X connect 3 2 0 0;
#X restore 310 141 pd log;
#X obj 310 50 r apc-out;
#X connect 0 0 2 0;
#X connect 1 0 2 1;
#X connect 3 0 8 0;
#X connect 5 0 4 0;
#X connect 6 0 8 0;
#X connect 8 0 19 0;
#X connect 10 0 0 0;
#X connect 10 1 1 0;
#X connect 11 0 12 0;
#X connect 13 0 20 0;
#X connect 14 0 13 1;
#X connect 15 0 8 0;
#X connect 16 0 7 0;
#X connect 18 0 10 0;
#X connect 19 0 7 0;
#X connect 19 1 17 0;
#X connect 21 0 13 0;
